<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Методические рекомендации — Основы REST API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<nav class="nav-files">
  <div class="nav-files__inner">
    <!-- Теоретические разделы -->
    <a href="index.htm">1.1. Информационные системы</a>
    <a href="csharpAspnet.htm">1.2. C# и ASP.NET Core</a>
    <a href="dbEfcore.htm">1.3. Базы данных и EF Core</a>
    <a href="restApi.htm">1.4. REST API</a>
    <a href="docker.htm">1.5. Docker</a>
    <a href="docFile.html">1.6. Dockerfile</a>
    <a href="dockerCompose.htm">1.7. Docker Compose</a>
    <a href="monitoring.html">1.8. Мониторинг, логи и health-check</a>
    <a href="practices.html">1.9. Практики сопровождения</a>
    <a href="documentation.html">1.10. Документирование</a>

    <!-- Практические блоки -->
    <a href="assignment.html">2. Выполнение задания</a>
    <a href="task1-webapi.html">2.2. Web API (практика)</a>
    <a href="task2-crud.html">2.3. CRUD-функционал</a>
    <a href="task3-docker.html">2.4. Контейнеризация</a>
    <a href="task4-postgres-compose.html">2.5. PostgreSQL и docker-compose</a>
    <a href="task5-update-version.html">2.6. Обновление версии</a>
    <a href="task6-logs.html">2.7. Логи контейнеров</a>
    <a href="task7-health.html">2.8. Health-check</a>
    <a href="task8-backup.html">2.9. Резервное копирование</a>
  </div>
</nav>

  <main class="page">
    <h1>1.4 Основы REST API</h1>

    <!-- Навигация по темам -->
    <nav class="nav-topics">
      <div class="nav-topics__title">Оглавление раздела 1.4</div>
      <ul>
        <li><a href="#1-4-0">1.4. Основы REST API</a></li>
        <li><a href="#1-4-1">1.4.1. Ключевые принципы REST</a></li>
        <li><a href="#1-4-2">1.4.2. Структура HTTP-запросов</a></li>
        <li><a href="#1-4-3">1.4.3. Пример REST-запроса</a></li>
        <li><a href="#1-4-4">1.4.4. Swagger / OpenAPI</a></li>
        <li><a href="#1-4-5">1.4.5. OpenAPI</a></li>
      </ul>
    </nav>

    <section id="1-4-0">
      <h2>1.4. Основы REST API</h2>
      <p>
        <strong>REST (Representational State Transfer)</strong> — архитектурный стиль
        построения web-сервисов, основанный на использовании стандартных методов HTTP и
        представления данных в виде ресурсов. REST API используется в большинстве
        современных веб-приложений, мобильных сервисов и микросервисов.
      </p>
    </section>

    <hr />

    <section id="1-4-1">
      <h2>1.4.1. Ключевые принципы REST</h2>

      <p>
        REST основывается на наборе концепций, определяющих, как должен быть устроен API.
      </p>

      <h3>1. Ресурсы</h3>
      <p>
        <strong>Ресурс</strong> — это объект или сущность, на которую можно выполнять операции.
      </p>

      <p>Примеры ресурсов:</p>
      <ul>
        <li><code>/users</code> — пользователи;</li>
        <li><code>/orders</code> — заказы;</li>
        <li><code>/products</code> — товары.</li>
      </ul>

      <p>
        Каждый ресурс имеет уникальный URL (endpoint) и может включать подресурсы:
      </p>
      <ul>
        <li><code>/users/5/orders</code> — заказы пользователя с <code>id = 5</code>.</li>
      </ul>

      <blockquote>
        <p>
          Ресурс — это <em>что</em>, а HTTP-метод — <em>что с ним делать</em>.
        </p>
      </blockquote>

      <h3>2. Методы HTTP</h3>

      <p>Методы HTTP определяют операцию над ресурсом.</p>

      <table>
        <thead>
          <tr>
            <th>Метод</th>
            <th>Назначение</th>
            <th>REST-операция</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>GET</td>
            <td>Получение данных</td>
            <td>Read</td>
          </tr>
          <tr>
            <td>POST</td>
            <td>Создание нового ресурса</td>
            <td>Create</td>
          </tr>
          <tr>
            <td>PUT</td>
            <td>Полное обновление ресурса</td>
            <td>Update</td>
          </tr>
          <tr>
            <td>PATCH</td>
            <td>Частичное обновление</td>
            <td>Partial Update</td>
          </tr>
          <tr>
            <td>DELETE</td>
            <td>Удаление ресурса</td>
            <td>Delete</td>
          </tr>
        </tbody>
      </table>

      <p>Примеры:</p>
      <ul>
        <li><code>GET /api/users</code> — получить список пользователей;</li>
        <li><code>POST /api/users</code> — создать пользователя;</li>
        <li><code>PUT /api/users/3</code> — обновить пользователя №3;</li>
        <li><code>DELETE /api/users/5</code> — удалить пользователя №5.</li>
      </ul>

      <h3>3. Статусы ответов</h3>

      <p>REST активно использует стандартные HTTP-коды:</p>

      <table>
        <thead>
          <tr>
            <th>Код</th>
            <th>Назначение</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>200 OK</td>
            <td>успешный запрос</td>
          </tr>
          <tr>
            <td>201 Created</td>
            <td>успешно создан новый объект</td>
          </tr>
          <tr>
            <td>204 No Content</td>
            <td>успешный запрос без тела ответа</td>
          </tr>
          <tr>
            <td>400 Bad Request</td>
            <td>ошибка клиента, неверный формат данных</td>
          </tr>
          <tr>
            <td>401 Unauthorized</td>
            <td>нет авторизации</td>
          </tr>
          <tr>
            <td>403 Forbidden</td>
            <td>доступ запрещён</td>
          </tr>
          <tr>
            <td>404 Not Found</td>
            <td>ресурс не найден</td>
          </tr>
          <tr>
            <td>409 Conflict</td>
            <td>конфликт данных (например, уникальность)</td>
          </tr>
          <tr>
            <td>500 Internal Server Error</td>
            <td>ошибка сервера</td>
          </tr>
        </tbody>
      </table>

      <div class="note note--info">
        <div class="note__title">Важно</div>
        <p>
          Корректные статусы помогают клиенту понимать, что произошло, и упрощают
          обработку ошибок на стороне фронтенда и других сервисов.
        </p>
      </div>
    </section>

    <hr />

    <section id="1-4-2">
      <h2>1.4.2. Структура HTTP-запросов</h2>

      <p>
        Запросы в REST API состоят из трёх ключевых частей: заголовки, тело и параметры
        строки запроса.
      </p>

      <h3>1. Headers (заголовки)</h3>

      <p>Заголовки используются для передачи дополнительных параметров:</p>
      <ul>
        <li><code>Content-Type: application/json</code> — тип данных;</li>
        <li><code>Authorization: Bearer &lt;token&gt;</code> — токен доступа;</li>
        <li><code>Accept: application/json</code> — ожидаемый формат ответа.</li>
      </ul>

      <div class="script-block">
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5c...
      </div>

      <h3>2. Body (тело запроса)</h3>

      <p>Передаётся в <code>POST</code>/<code>PUT</code>/<code>PATCH</code> запросах. Обычно в формате JSON.</p>

      <pre><code class="language-json">{
  "email": "user@mail.com",
  "password": "123456"
}</code></pre>

      <p>Для <code>GET</code> и <code>DELETE</code> тело, как правило, не используется.</p>

      <h3>3. Query parameters</h3>

      <p>
        Используются для фильтрации, поиска, сортировки, пагинации, например:
      </p>

      <pre><code class="language-text">GET /api/products?category=books&amp;sort=price&amp;page=2</code></pre>

      <p>Примеры параметров:</p>
      <ul>
        <li><code>?search=phone</code></li>
        <li><code>?limit=20</code></li>
        <li><code>?isActive=true</code></li>
      </ul>
    </section>

    <hr />

    <section id="1-4-3">
      <h2>1.4.3. Пример REST-запроса</h2>

      <p><strong>Задача:</strong> создать нового пользователя.</p>

      <div class="script-block">
POST /api/users
Content-Type: application/json

{
  "name": "Alex",
  "email": "alex@mail.com"
}
      </div>

      <p>Ответ от сервера:</p>

      <pre><code class="language-text">HTTP/1.1 201 Created
Location: /api/users/15</code></pre>

      <div class="note note--info">
        <div class="note__title">Замечание</div>
        <p>
          Полезно возвращать заголовок <code>Location</code> с URL созданного ресурса,
          чтобы клиент мог сразу обратиться к нему повторно.
        </p>
      </div>
    </section>

    <hr />

    <section id="1-4-4">
      <h2>1.4.4. Swagger / OpenAPI</h2>

      <p>
        <strong>Swagger</strong> — это инструмент, который генерирует интерактивную
        документацию REST API.
      </p>

      <p>Он позволяет:</p>
      <ul>
        <li>автоматически отображать все эндпоинты;</li>
        <li>показывать модель данных (DTO);</li>
        <li>отправлять тестовые запросы прямо из браузера;</li>
        <li>сохранять структуру API в формате OpenAPI (JSON/YAML);</li>
        <li>использовать автогенерацию клиентов.</li>
      </ul>

      <p>Swagger облегчает тестирование и демонстрацию API студентами.</p>

      <h3>1.4.4.1. Пример отображения метода в Swagger</h3>

      <p>
        Эндпоинт <code>POST /api/users</code> в Swagger UI будет иметь:
      </p>

      <ul>
        <li>кнопку <span class="tag">Try it out</span> для отправки запроса;</li>
        <li>пример JSON-запроса;</li>
        <li>описание параметров и схемы DTO;</li>
        <li>список возможных статусов ответов (200, 201, 400, 500 и др.).</li>
      </ul>

      <h3>1.4.4.2. Подключение Swagger в ASP.NET Core</h3>

      <pre><code class="language-csharp">builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

app.UseSwagger();
app.UseSwaggerUI();</code></pre>

      <p>
        После запуска API документация будет доступна по адресу, например:
      </p>

      <pre><code class="language-text">http://localhost:5000/swagger</code></pre>
    </section>

    <hr />

    <section id="1-4-5">
      <h2>1.4.5. OpenAPI (желательно)</h2>

      <p>
        <strong>OpenAPI</strong> — это формат описания API, позволяющий автоматически
        генерировать документацию, тесты и клиентов.
      </p>

      <p>Обычно файл называется:</p>
      <ul>
        <li><code>openapi.json</code></li>
        <li><code>openapi.yaml</code></li>
      </ul>

      <p>Он содержит:</p>
      <ul>
        <li>описание всех методов;</li>
        <li>модели данных;</li>
        <li>типы параметров;</li>
        <li>примеры запросов и ответов.</li>
      </ul>

      <div class="note note--info">
        <div class="note__title">Связь со Swagger UI</div>
        <p>
          Swagger UI использует именно спецификацию OpenAPI для отображения
          интерактивной документации, поэтому корректное описание API в
          <code>openapi.json</code> или <code>openapi.yaml</code> критично
          для качества документации.
        </p>
      </div>
    </section>
  </main>
</body>
</html>


