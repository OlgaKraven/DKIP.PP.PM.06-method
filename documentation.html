<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Методические рекомендации — Документирование</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<nav class="nav-files">
  <div class="nav-files__inner">
    <!-- Теоретические разделы -->
    <a href="index.htm">1.1. Информационные системы</a>
    <a href="csharpAspnet.htm">1.2. C# и ASP.NET Core</a>
    <a href="dbEfcore.htm">1.3. Базы данных и EF Core</a>
    <a href="restApi.htm">1.4. REST API</a>
    <a href="docker.htm">1.5. Docker</a>
    <a href="docFile.html">1.6. Dockerfile</a>
    <a href="dockerCompose.htm">1.7. Docker Compose</a>
    <a href="monitoring.html">1.8. Мониторинг, логи и health-check</a>
    <a href="practices.html">1.9. Практики сопровождения</a>
    <a href="documentation.html">1.10. Документирование</a>

    <!-- Практические блоки -->
    <a href="assignment.html">2. Выполнение задания</a>
    <a href="task1-webapi.html">2.2. Web API (практика)</a>
    <a href="task2-crud.html">2.3. CRUD-функционал</a>
    <a href="task3-docker.html">2.4. Контейнеризация</a>
    <a href="task4-postgres-compose.html">2.5. PostgreSQL и docker-compose</a>
    <a href="task5-update-version.html">2.6. Обновление версии</a>
    <a href="task6-logs.html">2.7. Логи контейнеров</a>
    <a href="task7-health.html">2.8. Health-check</a>
    <a href="task8-backup.html">2.9. Резервное копирование</a>
  </div>
</nav>

  <main class="page">
    <h1>1.10. Документирование</h1>



  <main class="page">
    <h1>1.10. Документирование</h1>

    <!-- Навигация по темам -->
    <nav class="nav-topics">
      <div class="nav-topics__title">Оглавление раздела 1.10</div>
      <ul>
        <li><a href="#1-10-0">1.10. Документирование</a></li>
        <li><a href="#1-10-1">1.10.1. Архитектурная схема</a></li>
        <li><a href="#1-10-2">1.10.2. Описание API</a></li>
        <li><a href="#1-10-3">1.10.3. Инструкция по запуску</a></li>
        <li><a href="#1-10-4">1.10.4. Инструкция по обновлению</a></li>
        <li><a href="#1-10-5">1.10.5. Инструкции по резервному копированию</a></li>
        <li><a href="#1-10-6">1.10.6. Swagger и Postman: основы работы</a></li>
      </ul>
    </nav>

    <!-- 1.10.0 -->
    <section id="1-10-0">
      <h2>1.10. Документирование</h2>
      <p>
        Документирование — ключевой этап разработки и сопровождения информационных
        систем. Грамотная документация позволяет новым разработчикам, администраторам и
        пользователям быстро понять структуру проекта, особенности его запуска и
        эксплуатации.
      </p>
      <p>
        Документы должны быть структурированными, однозначными, актуальными и
        соответствовать реальному состоянию системы.
      </p>
    </section>

    <hr />

    <!-- 1.10.1 -->
    <section id="1-10-1">
      <h2>1.10.1. Архитектурная схема</h2>

      <p>Архитектурная схема — это графическое представление структуры информационной системы.</p>

      <p>Обычно включает:</p>
      <ul>
        <li>компоненты приложения (API, базы данных, сервисы),</li>
        <li>взаимодействие модулей,</li>
        <li>сетевые соединения (порты, протоколы),</li>
        <li>внешние интеграции (сторонние API, платежные сервисы),</li>
        <li>контейнерную инфраструктуру (Docker),</li>
        <li>схему деплоя.</li>
      </ul>

      <p>Архитектурная схема помогает:</p>
      <ul>
        <li>быстро понять структуру проекта,</li>
        <li>определить зависимости,</li>
        <li>выявить узкие места,</li>
        <li>упростить сопровождение и модернизацию системы.</li>
      </ul>

      <p>Используемые инструменты:</p>
      <ul>
        <li>Draw.io</li>
        <li>Miro</li>
        <li>Figma</li>
        <li>PlantUML</li>
        <li>Mermaid</li>
      </ul>
    </section>

    <hr />

    <!-- 1.10.2 -->
    <section id="1-10-2">
      <h2>1.10.2. Описание API</h2>

      <p>Описание API — это документ, определяющий правила взаимодействия внешних клиентов с системой.</p>

      <h3>1. Эндпоинты</h3>
      <p>Каждый эндпоинт должен быть описан:</p>
      <ul>
        <li>адрес (например, <code>/api/users</code>),</li>
        <li>HTTP-метод (GET, POST, PUT, DELETE),</li>
        <li>назначение,</li>
        <li>параметры запроса,</li>
        <li>структура тела запроса,</li>
        <li>структура тела ответа,</li>
        <li>коды ошибок (400, 404, 500).</li>
      </ul>

      <h3>2. Примеры запросов</h3>

      <pre><code class="language-http">POST /api/users
Content-Type: application/json

{
  "email": "test@mail.com",
  "password": "123456"
}</code></pre>

      <h3>3. Форматы данных</h3>

      <ul>
        <li>JSON (основной формат),</li>
        <li>правила сериализации и десериализации.</li>
      </ul>

      <p>Качественная документация API ускоряет разработку и облегчает интеграцию.</p>
    </section>

    <hr />

    <!-- 1.10.3 -->
    <section id="1-10-3">
      <h2>1.10.3. Инструкция по запуску</h2>

      <p>Инструкция по запуску позволяет поднять систему «с нуля».</p>

      <h3>Обязательные элементы:</h3>

      <ol>
        <li>
          <strong>Системные требования</strong><br/>
          Версии .NET, PostgreSQL, Docker и других инструментов.
        </li>
        <li>
          <strong>Переменные среды</strong><br/>
          Примеры:<br/>
          <code>ConnectionStrings__Default</code>,<br/>
          <code>JwtKey</code>
        </li>
        <li>
          <strong>Команды запуска</strong><br/>
          <div class="script-block">
docker build -t myapi .<br/>
docker run -p 8080:8080 myapi
          </div>
        </li>
        <li>
          <strong>Порядок запуска сервисов</strong><br/>
          сначала база данных → затем API → затем миграции
        </li>
        <li>
          <strong>Проверка успешного запуска</strong><br/>
          открыть <code>/swagger</code> или <code>/health</code>
        </li>
      </ol>

      <div class="note note--info">
        <div class="note__title">Важно</div>
        <p>Инструкция должна быть протестирована и повторяемой.</p>
      </div>
    </section>

    <hr />

    <!-- 1.10.4 -->
    <section id="1-10-4">
      <h2>1.10.4. Инструкция по обновлению</h2>

      <p>
        Инструкция по обновлению используется при выпуске новой версии приложения.
      </p>

      <ol>
        <li>Описание того, что обновляется (код, конфигурации, миграции).</li>
        <li>Подготовка резервной копии.</li>
        <li>Остановка старой версии.</li>
        <li>Загрузка образа или сборка проекта.</li>
        <li>Выполнение миграций:
          <div class="script-block">
dotnet ef database update
          </div>
        </li>
        <li>Запуск новой версии.</li>
        <li>Проверка работоспособности через <code>/health</code> или мониторинг.</li>
        <li>Откат (rollback) на случай ошибки.</li>
      </ol>

      <div class="note note--info">
        <div class="note__title">Комментарий</div>
        <p>Документирование процесса обновления снижает риск ошибок и ускоряет сопровождение.</p>
      </div>
    </section>

    <hr />

    <!-- 1.10.5 -->
    <section id="1-10-5">
      <h2>1.10.5. Инструкции по резервному копированию</h2>

      <p>Резервное копирование — обязательный процесс для защиты данных.</p>

      <h3>1. Что нужно копировать</h3>
      <ul>
        <li>базы данных PostgreSQL (dump),</li>
        <li>Docker volumes,</li>
        <li>конфигурационные файлы,</li>
        <li>логи,</li>
        <li>файлы окружения и ключи.</li>
      </ul>

      <h3>2. Инструменты</h3>
      <ul>
        <li><code>pg_dump</code>, <code>pg_restore</code></li>
        <li>резервирование Docker volume</li>
        <li>отдельные backup-скрипты</li>
      </ul>

      <h3>3. Частота и политика хранения</h3>
      <ul>
        <li>ежедневные инкрементальные копии,</li>
        <li>еженедельные полные,</li>
        <li>хранение не менее 30 дней.</li>
      </ul>

      <h3>4. Примеры команд</h3>

      <p>Резервная копия PostgreSQL:</p>
      <div class="script-block">
pg_dump -U postgres mydb &gt; backup.sql
      </div>

      <p>Резервная копия Docker volume:</p>
      <div class="script-block">
docker run --rm -v pgdata:/data -v $(pwd):/backup \
  ubuntu tar cvf /backup/pgdata.tar /data
      </div>

      <h3>5. Порядок восстановления</h3>

      <ul>
        <li>развернуть БД,</li>
        <li>импортировать dump или volume,</li>
        <li>проверить целостность данных,</li>
        <li>запустить приложение.</li>
      </ul>

      <div class="note note--info">
        <div class="note__title">Рекомендация</div>
        <p>Все инструкции backup должны храниться вместе с проектом в отдельной папке docs/.</p>
      </div>
    </section>

    <hr />

    <!-- 1.10.6 -->
    <section id="1-10-6">
      <h2>1.10.6. Swagger и Postman: основы работы</h2>

      <h3>Swagger</h3>

      <p>
        Swagger — встроенный инструмент ASP.NET Core для автоматической генерации документации
        API.
      </p>

      <p>Позволяет:</p>
      <ul>
        <li>просматривать список всех эндпоинтов,</li>
        <li>изучать структуру запросов и ответов,</li>
        <li>отправлять тестовые запросы,</li>
        <li>использовать JSON/OpenAPI-спецификацию.</li>
      </ul>

      <p>Обычно доступен по адресу <code>/swagger</code>.</p>

      <p>Подключение:</p>

      <pre><code class="language-csharp">builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
app.UseSwagger();
app.UseSwaggerUI();</code></pre>

      <h3>Postman</h3>

      <p>Postman используется для ручного тестирования API.</p>

      <ul>
        <li>создание коллекций запросов,</li>
        <li>проверка ошибок и кодов ответа,</li>
        <li>работа с параметрами и JSON,</li>
        <li>отправка токенов (Bearer JWT),</li>
        <li>экспорт коллекций.</li>
      </ul>

      <p>
        Postman помогает проверить API до написания автотестов или интеграционных сценариев.
      </p>
    </section>
  </main>
</body>

</html>
