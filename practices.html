<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Методические рекомендации — Практики сопровождения информационных систем</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<nav class="nav-files">
  <div class="nav-files__inner">
    <!-- Теоретические разделы -->
    <a href="index.htm">1.1. Информационные системы</a>
    <a href="csharpAspnet.htm">1.2. C# и ASP.NET Core</a>
    <a href="dbEfcore.htm">1.3. Базы данных и EF Core</a>
    <a href="restApi.htm">1.4. REST API</a>
    <a href="docker.htm">1.5. Docker</a>
    <a href="docFile.html">1.6. Dockerfile</a>
    <a href="dockerCompose.htm">1.7. Docker Compose</a>
    <a href="monitoring.html">1.8. Мониторинг, логи и health-check</a>
    <a href="practices.html">1.9. Практики сопровождения</a>
    <a href="documentation.html">1.10. Документирование</a>

    <!-- Практические блоки -->
    <a href="assignment.html">2. Выполнение задания</a>
    <a href="task1-webapi.html">2.2. Web API (практика)</a>
    <a href="task2-crud.html">2.3. CRUD-функционал</a>
    <a href="task3-docker.html">2.4. Контейнеризация</a>
    <a href="task4-postgres-compose.html">2.5. PostgreSQL и docker-compose</a>
    <a href="task5-update-version.html">2.6. Обновление версии</a>
    <a href="task6-logs.html">2.7. Логи контейнеров</a>
    <a href="task7-health.html">2.8. Health-check</a>
    <a href="task8-backup.html">2.9. Резервное копирование</a>
  </div>
</nav>

  <main class="page">
    <h1>1.9. Практики сопровождения информационных систем</h1>

    <!-- Навигация по темам -->
    <nav class="nav-topics">
      <div class="nav-topics__title">Оглавление раздела 1.9</div>
      <ul>
        <li><a href="#1-9-0">1.9. Практики сопровождения информационных систем</a></li>
        <li><a href="#1-9-1">1.9.1. Обновление версий приложения</a></li>
        <li><a href="#1-9-2">1.9.2. Резервное копирование данных</a></li>
        <li><a href="#1-9-3">1.9.3. CI/CD (базовое понимание)</a></li>
        <li><a href="#1-9-4">1.9.4. Почему контейнеры упрощают сопровождение</a></li>
      </ul>
    </nav>

    <!-- 1.9.0 -->
    <section id="1-9-0">
      <h2>1.9. Практики сопровождения информационных систем</h2>
      <p>
        Сопровождение — это комплекс мероприятий, направленных на обеспечение стабильной,
        безопасной и актуальной работы информационной системы.
      </p>
      <p>
        Студент должен понимать, как выполняются обновления системы, как защищаются данные
        и как современные инструменты (CI/CD, Docker) упрощают эксплуатацию.
      </p>
    </section>

    <hr />

    <!-- 1.9.1 -->
    <section id="1-9-1">
      <h2>1.9.1. Обновление версий приложения</h2>

      <p>
        Обновление версии — это процесс развертывания новой сборки приложения в рабочую среду.
        Ниже приведена типовая схема обновления контейнеризованного приложения.
      </p>

      <h3>1. Новый код</h3>
      <p>Разработчик вносит изменения в проект:</p>
      <ul>
        <li>новое API,</li>
        <li>исправление ошибок,</li>
        <li>обновлённые зависимости.</li>
      </ul>
      <p>Код сохраняется в Git-репозитории.</p>

      <h3>2. Сборка нового образа</h3>
      <p>На основе Dockerfile создаётся новый образ приложения:</p>

      <div class="script-block">
docker build -t myapp:v2 .
      </div>

      <p>
        Версионирование (например, <code>v1</code>, <code>v2</code>, <code>v3</code>)
        позволяет при необходимости откатываться на предыдущие версии.
      </p>

      <h3>3. Публикация образа (опционально)</h3>
      <p>Отправка образа в Docker Hub или GitHub Container Registry:</p>

      <div class="script-block">
docker push username/myapp:v2
      </div>

      <h3>4. Перезапуск контейнера</h3>

      <p>Сначала останавливается и удаляется старый контейнер:</p>

      <div class="script-block">
docker stop app
docker rm app
      </div>

      <p>Затем запускается новый контейнер на основе обновлённого образа:</p>

      <div class="script-block">
docker run -d -p 8080:8080 --name app myapp:v2
      </div>

      <p>Если используется Docker Compose:</p>

      <div class="script-block">
docker compose down
docker compose up -d --build
      </div>

      <h3>5. Проверка работоспособности</h3>

      <ul>
        <li>проверка endpoint <code>/health</code>,</li>
        <li>просмотр логов:
          <div class="script-block">docker logs app</div>
        </li>
        <li>проверка ответов API и статусов HTTP.</li>
      </ul>
    </section>

    <hr />

    <!-- 1.9.2 -->
    <section id="1-9-2">
      <h2>1.9.2. Резервное копирование данных</h2>

      <p>
        Резервное копирование (backup) — обязательный элемент сопровождения.
        Оно позволяет восстановить систему при:
      </p>
      <ul>
        <li>сбоях оборудования,</li>
        <li>ошибках обновления,</li>
        <li>повреждении данных,</li>
        <li>ошибках пользователя.</li>
      </ul>

      <h3>1. SQL dump (экспорт базы данных)</h3>

      <p>Для PostgreSQL:</p>

      <div class="script-block">
pg_dump -U postgres appdb &gt; backup.sql
      </div>

      <p>Восстановление:</p>

      <div class="script-block">
psql -U postgres appdb &lt; backup.sql
      </div>

      <p>SQL dump позволяет хранить копию данных вне контейнера и вне томов Docker.</p>

      <h3>2. Резервное копирование Docker volume</h3>

      <p>
        Если база данных работает в контейнере, данные обычно хранятся в томе
        (volume). Для резервного копирования тома:
      </p>

      <div class="script-block">
docker run --rm \
  -v pgdata:/data \
  -v $(pwd):/backup \
  ubuntu tar cvf /backup/pgdata.tar /data
      </div>

      <p>Восстановление volume:</p>

      <div class="script-block">
docker run --rm \
  -v pgdata:/data \
  -v $(pwd):/backup \
  ubuntu tar xvf /backup/pgdata.tar -C /
      </div>

      <p>
        Том содержит файлы базы данных (каталоги <code>base/</code>, журналы <code>*.wal</code> и другие данные PostgreSQL).
      </p>

      <h3>3. Рекомендации по резервному копированию</h3>

      <ul>
        <li>хранить резервные копии на другом диске или сервере,</li>
        <li>делать ежедневные инкрементальные и еженедельные полные копии,</li>
        <li>регулярно тестировать процесс восстановления,</li>
        <li>хранить резервные копии не менее 30 дней.</li>
      </ul>
    </section>

    <hr />

    <!-- 1.9.3 -->
    <section id="1-9-3">
      <h2>1.9.3. CI/CD (базовое понимание)</h2>

      <p>
        <strong>CI/CD</strong> — это подход к автоматизации разработки и сопровождения
        приложений.
      </p>

      <h3>CI — Continuous Integration (постоянная интеграция)</h3>
      <p>Включает:</p>
      <ul>
        <li>автоматическую сборку кода при коммитах,</li>
        <li>запуск модульных и интеграционных тестов,</li>
        <li>анализ ошибок и отчёты о качестве сборки.</li>
      </ul>

      <h3>CD — Continuous Delivery / Deployment</h3>
      <p>Обычно включает:</p>
      <ul>
        <li>автоматическое создание Docker-образа,</li>
        <li>развёртывание на тестовой или продуктивной среде,</li>
        <li>раскатку обновлений по серверам.</li>
      </ul>

      <h3>Зачем нужно CI/CD</h3>

      <ul>
        <li>уменьшает количество ошибок при запуске новых версий,</li>
        <li>ускоряет выпуск обновлений,</li>
        <li>обеспечивает повторяемость процессов,</li>
        <li>уменьшает объём ручной работы и человеческий фактор,</li>
        <li>повышает качество сопровождения и стабильность системы.</li>
      </ul>
    </section>

    <hr />

    <!-- 1.9.4 -->
    <section id="1-9-4">
      <h2>1.9.4. Почему контейнеры упрощают сопровождение</h2>

      <p>
        Контейнеризация — один из ключевых инструментов DevOps, значительно
        упрощающий сопровождение приложений.
      </p>

      <h3>1. Единая среда</h3>
      <p>Контейнер включает в себя:</p>
      <ul>
        <li>приложение,</li>
        <li>зависимости и библиотеки,</li>
        <li>конфигурации,</li>
        <li>конкретные версии компонентов.</li>
      </ul>
      <p>Не требуется отдельно настраивать сервер под каждое приложение.</p>

      <h3>2. Предсказуемость</h3>
      <p>
        Если контейнер работает на локальной машине разработчика, он будет работать и
        на сервере при тех же настройках. Проблема «работает только у меня»
        существенно снижается.
      </p>

      <h3>3. Быстрое развертывание</h3>
      <p>Новый контейнер запускается за секунды, что ускоряет обновление и масштабирование.</p>

      <h3>4. Лёгкий откат</h3>
      <p>
        Если новая версия работает некорректно, можно запустить предыдущую:
      </p>

      <div class="script-block">
docker run myapp:v1
      </div>

      <h3>5. Масштабирование</h3>
      <p>
        Легко запускать несколько экземпляров одного и того же образа и распределять
        нагрузку между ними.
      </p>

      <h3>6. Упрощённый мониторинг и логирование</h3>
      <p>
        Базовые команды Docker помогают быстро диагностировать проблемы:
      </p>

      <div class="script-block">
docker logs
docker ps
docker inspect
      </div>

      <p>
        В сочетании с внешними системами мониторинга (Prometheus, Grafana, ELK) контейнеры
        дают полную картину состояния приложения.
      </p>
    </section>

  </main>
</body>
</html>
